By Aaron Pressman 10:50 AM EST 
After years of conspiracy theories that Apple was purposely slowing older iPhones to prompt upgrade purchases, the opposite effect may be in play now, according to one Wall Street analyst. 
Apple last month admitted that in recent years its iOS software intentionally slow the performance of older iPhones when the batteries degraded. Without the slowdown, the iPhones would suddenly shutdown when the aged batteries couldn’t provide enough power for peak performance. Along with an apology, Apple said it would replace the battery on any model of the iPhone 6 or later for just $29. 
The offer, and the resulting improvement in performance for older iPhones, may prompt millions of people to forgo an upgrade to a new phone this year, Barclays analyst Mark Moskowitz says. “Our August Wireless survey suggests battery drain is No. 1 reason for users to upgrade to new device – therefore, a new battery may deter some upgrade intention,” Moskowitz writes in a research note on Wednesday. The analyst, who says he is worried Wall Street is “too optimistic” about iPhone sales, rates Apple’s stock “neutral.” 
About three-quarters of the 675 million iPhones currently in use would be eligible and potentially in need of the battery upgrade, Moskowitz estimates. “Due to the large base, even a small percentage opting for battery replacement over upgrade could have meaningful impact on iPhone sales,” the analyst writes. 
Get Data Sheet , Fortune’s technology newsletter. 
Assuming just 10% of those eligible take the offer, and about one-third of the battery seekers would have otherwise bought a new iPhone this year, then Apple will lose out on sales of 16 million devices and $10.3 billion of annual revenue, the Barclays analyst forecasts. If half the battery swaps would have otherwise upgraded, Apple loses out on 27 million sales and $18.2 billion in revenue. 
For context, Wall Street assumes Apple will bring in $274 billion of revenue in its 2018 fiscal year, according to FactSet Research, including sales of 241 million iPhones. 
Shares of Apple (aapl) were up 1% to $173.94 in midday trading on Wednesday. SPONSORED FINANCIAL CONTENT 